(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26822,e=>{"use strict";var s=e.i(58142);async function a(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return null;let{data:i,error:t}=await e.from("profiles").select("*").eq("id",a.id).maybeSingle();return t?(console.error("Error fetching profile:",t),null):i}async function i(e=null){let a=(0,s.createClient)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{error:"Not authenticated"};let{data:n,error:l}=await a.from("profiles").insert({id:t.id,username:e||t.email?.split("@")[0],elo:1e3,wins:0,losses:0}).select().single();return l?(console.error("Error creating profile:",l),{error:l}):{data:n}}async function t(){let e=await a();if(e)return e;let{data:s,error:t}=await i();return t?null:s}async function n(e){let a=(0,s.createClient)(),{data:{user:i}}=await a.auth.getUser();if(!i)return{error:"Not authenticated"};let{data:t,error:n}=await a.from("profiles").update(e).eq("id",i.id).select().single();return n?(console.error("Error updating profile:",n),{error:n}):{data:t}}async function l(e){let a=(0,s.createClient)(),{data:{user:i}}=await a.auth.getUser();if(!i)return{error:"Not authenticated"};let{data:t,error:n}=await a.from("picks").insert({user_id:i.id,game_id:e.gameId,home_team:e.homeTeam,away_team:e.awayTeam,pick_type:e.pickType,pick_value:e.pickValue,odds:e.odds,game_date:e.gameDate,is_locked:!1,result:"pending"}).select().single();return n?(console.error("Error saving pick:",n),{error:n}):{data:t}}async function c(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:i,error:t}=await e.from("picks").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});return t?(console.error("Error fetching picks:",t),[]):i}async function r(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:i,error:t}=await e.from("picks").select("*").eq("user_id",a.id).eq("result","pending").order("created_at",{ascending:!1});return t?(console.error("Error fetching pending picks:",t),[]):i}async function d(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:i,error:t}=await e.from("picks").select("*").eq("user_id",a.id).eq("is_locked",!0).order("created_at",{ascending:!1});return t?(console.error("Error fetching locked picks:",t),[]):i}async function o(e){let a=(0,s.createClient)(),{data:{user:i}}=await a.auth.getUser();if(!i)return{error:"Not authenticated"};let{data:t,error:n}=await a.from("picks").update({is_locked:!0}).eq("id",e).eq("user_id",i.id).select().single();return n?(console.error("Error locking pick:",n),{error:n}):{data:t}}async function m(e){let a=(0,s.createClient)(),{data:{user:i}}=await a.auth.getUser();if(!i)return{error:"Not authenticated"};let{error:t}=await a.from("picks").delete().eq("id",e).eq("user_id",i.id).eq("is_locked",!1);return t?(console.error("Error deleting pick:",t),{error:t}):{success:!0}}async function h(e,a){let i=(0,s.createClient)(),{data:{user:t}}=await i.auth.getUser();if(!t)return!1;let{data:n,error:l}=await i.from("picks").select("id").eq("user_id",t.id).eq("game_id",e).eq("pick_type",a).single();return!l&&!!n}async function u(e,a){let i=(0,s.createClient)(),{data:{user:t}}=await i.auth.getUser();if(!t)return null;let{data:n,error:l}=await i.from("picks").select("*").eq("user_id",t.id).eq("game_id",e).eq("pick_type",a).single();return l?null:n}e.s(["deletePick",()=>m,"getLockedPicks",()=>d,"getOrCreateProfile",()=>t,"getPendingPicks",()=>r,"getPick",()=>u,"getUserPicks",()=>c,"getUserProfile",()=>a,"hasPick",()=>h,"lockPick",()=>o,"savePick",()=>l,"updateUserProfile",()=>n])},42073,e=>{"use strict";var s=e.i(56731),a=e.i(28317),i=e.i(49651),t=e.i(58142),n=e.i(26822);e.s(["default",0,function(){var e;let l=(0,i.useRouter)(),c=(0,t.createClient)(),[r,d]=(0,a.useState)(null),[o,m]=(0,a.useState)(null),[h,u]=(0,a.useState)([]),[p,k]=(0,a.useState)("all"),[x,g]=(0,a.useState)(null),[j,N]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let{data:{user:e},error:s}=await c.auth.getUser();s||!e?l.push("/login"):(d(e),m(await (0,n.getOrCreateProfile)()),await v()),N(!1)})()},[l,c]);let v=async()=>{u(await (0,n.getUserPicks)())},f=async(e,s)=>{s?window.confirm("This is a locked prediction. Deleting will forfeit potential ELO gains. Are you sure?")&&(await (0,n.deletePick)(e),await v()):(await (0,n.deletePick)(e),await v())},w=async()=>{x&&(await (0,n.lockPick)(x),await v(),g(null))},b=h.filter(e=>"pending"===p?"pending"===e.result&&!e.is_locked:"locked"!==p||e.is_locked),y=h.filter(e=>"pending"===e.result&&!e.is_locked).length,_=h.filter(e=>e.is_locked).length,C={username:r?.email?.split("@")[0]||"PlayMaker",elo:o?.elo||1e3,wins:o?.wins||0,losses:o?.losses||0,currentStreak:0,streakType:"win",rank:(e=o?.elo||1e3)>=2400?"Grandmaster":e>=2100?"Master":e>=1800?"Diamond":e>=1500?"Platinum":e>=1200?"Gold":e>=900?"Silver":"Bronze",tier:"I"},P=C.wins+C.losses,E=P>0?(C.wins/P*100).toFixed(1):0,q=e=>({Bronze:"#CD7F32",Silver:"#C0C0C0",Gold:"#FFD700",Platinum:"#E5E4E2",Diamond:"#3B82F6",Master:"#A3FF12",Grandmaster:"#FF006E"})[e]||"#3B82F6";return j?(0,s.jsx)("div",{className:"dashboard-page",children:(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,s.jsx)("div",{className:"loading-spinner"})})}):(0,s.jsxs)("div",{className:"dashboard-page",children:[(0,s.jsx)("div",{className:"stats-header",children:(0,s.jsxs)("div",{className:"stats-header-container",children:[(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"1rem",alignItems:"center"},children:(0,s.jsxs)("div",{className:"user-welcome",style:{color:"#fff",fontSize:"1.2rem"},children:["Welcome, ",(0,s.jsx)("span",{style:{color:"#3B82F6",fontWeight:"bold"},children:r?.user_metadata?.username||r?.email})]})}),(0,s.jsxs)("div",{className:"elo-display",children:[(0,s.jsx)("div",{className:"elo-label",children:"ELO Rating"}),(0,s.jsx)("div",{className:"elo-value",children:C.elo}),(0,s.jsx)("div",{className:"elo-change",children:"+24 today"})]}),(0,s.jsxs)("div",{className:"stats-grid",children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-icon",children:"ðŸ“Š"}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsx)("div",{className:"stat-label",children:"Win/Loss"}),(0,s.jsxs)("div",{className:"stat-value",children:[C.wins,"W - ",C.losses,"L"]}),(0,s.jsxs)("div",{className:"stat-subtext",children:[E,"% Win Rate"]})]})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("div",{className:"stat-icon",children:"win"===C.streakType?"ðŸ”¥":"â„ï¸"}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsx)("div",{className:"stat-label",children:"Current Streak"}),(0,s.jsxs)("div",{className:`stat-value ${"win"===C.streakType?"streak-win":"streak-loss"}`,children:[C.currentStreak," ","win"===C.streakType?"Wins":"Losses"]}),(0,s.jsx)("div",{className:"stat-subtext",children:"win"===C.streakType?"Keep it going!":"Bounce back!"})]})]}),(0,s.jsx)("div",{className:"stat-card rank-card",children:(0,s.jsxs)("div",{className:"rank-badge",style:{borderColor:q(C.rank)},children:[(0,s.jsx)("div",{className:"rank-icon",style:{color:q(C.rank)},children:"ðŸ‘‘"}),(0,s.jsxs)("div",{className:"rank-content",children:[(0,s.jsx)("div",{className:"rank-name",style:{color:q(C.rank)},children:C.rank}),(0,s.jsx)("div",{className:"rank-tier",children:C.tier})]})]})})]})]})}),(0,s.jsxs)("div",{className:"dashboard-content",children:[(0,s.jsxs)("div",{className:"dashboard-grid",children:[(0,s.jsxs)("div",{className:"dashboard-section active-picks-section",children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("h2",{className:"section-title",children:"Active Picks"}),(0,s.jsxs)("span",{className:"section-badge",children:[y," pending, ",_," locked"]})]}),(0,s.jsxs)("div",{className:"filter-tabs",children:[(0,s.jsxs)("button",{className:`filter-tab ${"all"===p?"active":""}`,onClick:()=>k("all"),children:["All (",h.length,")"]}),(0,s.jsxs)("button",{className:`filter-tab ${"pending"===p?"active":""}`,onClick:()=>k("pending"),children:["Pending (",y,")"]}),(0,s.jsxs)("button",{className:`filter-tab ${"locked"===p?"active":""}`,onClick:()=>k("locked"),children:["Locked (",_,")"]})]}),0===b.length?(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-icon",children:"ðŸ€"}),(0,s.jsxs)("h3",{children:["No ","all"===p?"Active":p.charAt(0).toUpperCase()+p.slice(1)," Predictions"]}),(0,s.jsx)("p",{children:"Head to Predictions page to make your picks!"}),(0,s.jsx)("button",{className:"nav-button",onClick:()=>l.push("/predictions"),children:"Make Predictions"})]}):(0,s.jsx)("div",{className:"predictions-grid",children:b.map(e=>{let a=new Date(e.game_date),i=a.toDateString()===new Date().toDateString(),t=e.is_locked;return(0,s.jsxs)("div",{className:`prediction-card ${t?"locked":""}`,children:[(0,s.jsx)("button",{className:"delete-btn",onClick:()=>f(e.id,t),title:t?"Delete locked prediction":"Cancel prediction",children:"âœ•"}),(0,s.jsx)("div",{className:"game-header",children:(0,s.jsxs)("div",{className:"game-time",children:[(0,s.jsx)("span",{className:"date",children:a.toLocaleDateString()}),(0,s.jsx)("span",{className:"time",children:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i&&(0,s.jsx)("span",{className:"today-badge",children:"TODAY"})]})}),(0,s.jsxs)("div",{className:"teams-section",children:[(0,s.jsxs)("div",{className:"team",children:[(0,s.jsx)("span",{className:"team-name",children:e.away_team}),(0,s.jsx)("span",{className:"team-label",children:"AWAY"})]}),(0,s.jsx)("div",{className:"vs-divider",children:"@"}),(0,s.jsxs)("div",{className:"team",children:[(0,s.jsx)("span",{className:"team-name",children:e.home_team}),(0,s.jsx)("span",{className:"team-label",children:"HOME"})]})]}),(0,s.jsxs)("div",{className:"bet-details",children:[(0,s.jsx)("div",{className:`bet-type-badge ${e.pick_type}`,children:"moneyline"===e.pick_type?"Moneyline":"spread"===e.pick_type?"Spread":"Total Points"}),(0,s.jsxs)("div",{className:"your-pick",children:[(0,s.jsx)("span",{className:"pick-label",children:"Your Pick:"}),(0,s.jsxs)("span",{className:"pick-value",children:[e.pick_value," ","@ ",e.odds>0?"+":"",e.odds]})]})]}),(0,s.jsx)("div",{className:"prediction-footer",children:t?(0,s.jsx)("span",{className:"status-badge locked",children:"ðŸ”’ LOCKED"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"status-badge pending",children:"PENDING"}),(0,s.jsx)("button",{className:"lock-btn",onClick:()=>{g(e.id)},children:"ðŸ”“ Lock Pick"})]})})]},e.id)})})]}),(0,s.jsxs)("div",{className:"dashboard-section quick-actions-section",children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("h2",{className:"section-title",children:"Quick Actions"})}),(0,s.jsx)("div",{className:"section-placeholder-box",children:(0,s.jsx)("p",{children:"Quick Actions content coming soon..."})})]})]}),(0,s.jsxs)("div",{className:"dashboard-section friends-section",children:[(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("h2",{className:"section-title",children:"Friends Leaderboard"}),(0,s.jsx)("span",{className:"section-badge",children:"12 friends"})]}),(0,s.jsx)("div",{className:"section-placeholder-box",children:(0,s.jsx)("p",{children:"Friends Leaderboard content coming soon..."})})]}),(0,s.jsxs)("div",{className:"dashboard-section recent-results-section",children:[(0,s.jsx)("div",{className:"section-header",children:(0,s.jsx)("h2",{className:"section-title",children:"Recent Results"})}),(0,s.jsx)("div",{className:"section-placeholder-box",children:(0,s.jsx)("p",{children:"Recent Results content coming soon..."})})]})]}),x&&(0,s.jsx)("div",{className:"lock-confirmation-overlay",children:(0,s.jsxs)("div",{className:"lock-confirmation-modal",children:[(0,s.jsx)("h3",{children:"ðŸ”’ Lock This Prediction?"}),(0,s.jsx)("p",{children:"You won't be able to change or delete it."}),(0,s.jsx)("p",{className:"confirm-note",children:"This pick will count towards your ELO rating!"}),(0,s.jsxs)("div",{className:"confirm-buttons",children:[(0,s.jsx)("button",{className:"confirm-lock-btn",onClick:w,children:"Confirm Lock"}),(0,s.jsx)("button",{className:"cancel-lock-btn",onClick:()=>{g(null)},children:"Cancel"})]})]})})]})}])}]);