(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26822,e=>{"use strict";var s=e.i(58142);async function a(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return null;let{data:t,error:i}=await e.from("profiles").select("*").eq("id",a.id).maybeSingle();return i?(console.error("Error fetching profile:",i),null):t}async function t(e=null){let a=(0,s.createClient)(),{data:{user:i}}=await a.auth.getUser();if(!i)return{error:"Not authenticated"};let{data:r,error:l}=await a.from("profiles").insert({id:i.id,username:e||i.email?.split("@")[0],elo:1e3,wins:0,losses:0}).select().single();return l?(console.error("Error creating profile:",l),{error:l}):{data:r}}async function i(){let e=await a();if(e)return e;let{data:s,error:i}=await t();return i?null:s}async function r(e){let a=(0,s.createClient)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{error:"Not authenticated"};let{data:i,error:r}=await a.from("profiles").update(e).eq("id",t.id).select().single();return r?(console.error("Error updating profile:",r),{error:r}):{data:i}}async function l(e){let a=(0,s.createClient)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{error:"Not authenticated"};let{data:i,error:r}=await a.from("picks").insert({user_id:t.id,game_id:e.gameId,home_team:e.homeTeam,away_team:e.awayTeam,pick_type:e.pickType,pick_value:e.pickValue,odds:e.odds,game_date:e.gameDate,is_locked:!1,result:"pending"}).select().single();return r?(console.error("Error saving pick:",r),{error:r}):{data:i}}async function n(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:t,error:i}=await e.from("picks").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});return i?(console.error("Error fetching picks:",i),[]):t}async function c(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:t,error:i}=await e.from("picks").select("*").eq("user_id",a.id).eq("result","pending").order("created_at",{ascending:!1});return i?(console.error("Error fetching pending picks:",i),[]):t}async function o(){let e=(0,s.createClient)(),{data:{user:a}}=await e.auth.getUser();if(!a)return[];let{data:t,error:i}=await e.from("picks").select("*").eq("user_id",a.id).eq("is_locked",!0).order("created_at",{ascending:!1});return i?(console.error("Error fetching locked picks:",i),[]):t}async function d(e){let a=(0,s.createClient)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{error:"Not authenticated"};let{data:i,error:r}=await a.from("picks").update({is_locked:!0}).eq("id",e).eq("user_id",t.id).select().single();return r?(console.error("Error locking pick:",r),{error:r}):{data:i}}async function u(e){let a=(0,s.createClient)(),{data:{user:t}}=await a.auth.getUser();if(!t)return{error:"Not authenticated"};let{error:i}=await a.from("picks").delete().eq("id",e).eq("user_id",t.id).eq("is_locked",!1);return i?(console.error("Error deleting pick:",i),{error:i}):{success:!0}}async function m(e,a){let t=(0,s.createClient)(),{data:{user:i}}=await t.auth.getUser();if(!i)return!1;let{data:r,error:l}=await t.from("picks").select("id").eq("user_id",i.id).eq("game_id",e).eq("pick_type",a).single();return!l&&!!r}async function p(e,a){let t=(0,s.createClient)(),{data:{user:i}}=await t.auth.getUser();if(!i)return null;let{data:r,error:l}=await t.from("picks").select("*").eq("user_id",i.id).eq("game_id",e).eq("pick_type",a).single();return l?null:r}e.s(["deletePick",()=>u,"getLockedPicks",()=>o,"getOrCreateProfile",()=>i,"getPendingPicks",()=>c,"getPick",()=>p,"getUserPicks",()=>n,"getUserProfile",()=>a,"hasPick",()=>m,"lockPick",()=>d,"savePick",()=>l,"updateUserProfile",()=>r])},34658,e=>{"use strict";var s=e.i(56731),a=e.i(28317),t=e.i(58142),i=e.i(26822),r=e.i(20879);function l(){var e;let[l,n]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),[j,N]=(0,a.useState)({type:"",text:""}),v=(0,t.createClient)();(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await v.auth.getUser();if(n(e),e){let e=await (0,i.getUserProfile)();o(e),f(e?.username||"")}u(!1)})()},[]);let k=async()=>{if(!h.trim())return void N({type:"error",text:"Username cannot be empty"});x(!0),N({type:"",text:""});let e=await (0,i.updateUserProfile)({username:h.trim()});e?(o(e),p(!1),N({type:"success",text:"Username updated successfully!"})):N({type:"error",text:"Failed to update username. Try again."}),x(!1)},w=async()=>{await v.auth.signOut(),window.location.href="/login"};if(d)return(0,s.jsx)("div",{className:"profile-page",children:(0,s.jsxs)("div",{className:"profile-loading",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{children:"Loading profile..."})]})});if(!l)return(0,s.jsx)("div",{className:"profile-page",children:(0,s.jsxs)("div",{className:"profile-login-prompt",children:[(0,s.jsx)("h2",{children:"ðŸ”’ Sign In Required"}),(0,s.jsx)("p",{children:"Please sign in to view your profile."}),(0,s.jsx)(r.default,{href:"/login",className:"login-button",children:"Sign In"})]})});let y=(e=c?.elo||1e3)>=2e3?{title:"Legend",emoji:"ðŸ‘‘"}:e>=1700?{title:"Expert",emoji:"ðŸ†"}:e>=1400?{title:"Pro",emoji:"â­"}:e>=1100?{title:"Rising Star",emoji:"ðŸ“ˆ"}:{title:"Rookie",emoji:"ðŸŒ±"};return(0,s.jsx)("div",{className:"profile-page",children:(0,s.jsxs)("div",{className:"profile-container",children:[(0,s.jsxs)("div",{className:"profile-header",children:[(0,s.jsx)("div",{className:"profile-avatar",children:(c?.username||l.email)?.[0]?.toUpperCase()||"?"}),(0,s.jsxs)("div",{className:"profile-info",children:[m?(0,s.jsxs)("div",{className:"edit-username",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Enter username",className:"username-input",maxLength:20}),(0,s.jsxs)("div",{className:"edit-buttons",children:[(0,s.jsx)("button",{onClick:k,disabled:g,className:"save-btn",children:g?"Saving...":"Save"}),(0,s.jsx)("button",{onClick:()=>{p(!1),f(c?.username||"")},className:"cancel-btn",children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"username-display",children:[(0,s.jsx)("h1",{children:c?.username||"Set Username"}),(0,s.jsx)("button",{onClick:()=>p(!0),className:"edit-btn",children:"âœï¸ Edit"})]}),(0,s.jsx)("p",{className:"profile-email",children:l.email})]})]}),j.text&&(0,s.jsx)("div",{className:`profile-message ${j.type}`,children:j.text}),(0,s.jsxs)("div",{className:"profile-stats",children:[(0,s.jsxs)("div",{className:"stat-card elo-card",children:[(0,s.jsx)("span",{className:"stat-emoji",children:y.emoji}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsx)("span",{className:"stat-value",children:c?.elo||1e3}),(0,s.jsx)("span",{className:"stat-label",children:"ELO Rating"}),(0,s.jsx)("span",{className:"stat-rank",children:y.title})]})]}),(0,s.jsxs)("div",{className:"stat-card wins-card",children:[(0,s.jsx)("span",{className:"stat-emoji",children:"âœ…"}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsx)("span",{className:"stat-value",children:c?.wins||0}),(0,s.jsx)("span",{className:"stat-label",children:"Wins"})]})]}),(0,s.jsxs)("div",{className:"stat-card losses-card",children:[(0,s.jsx)("span",{className:"stat-emoji",children:"âŒ"}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsx)("span",{className:"stat-value",children:c?.losses||0}),(0,s.jsx)("span",{className:"stat-label",children:"Losses"})]})]}),(0,s.jsxs)("div",{className:"stat-card winrate-card",children:[(0,s.jsx)("span",{className:"stat-emoji",children:"ðŸ“Š"}),(0,s.jsxs)("div",{className:"stat-content",children:[(0,s.jsxs)("span",{className:"stat-value",children:[(()=>{if(!c)return 0;let e=c.wins+c.losses;return 0===e?0:(c.wins/e*100).toFixed(1)})(),"%"]}),(0,s.jsx)("span",{className:"stat-label",children:"Win Rate"})]})]})]}),(0,s.jsxs)("div",{className:"elo-progress-section",children:[(0,s.jsx)("h3",{children:"ELO Progress"}),(0,s.jsxs)("div",{className:"elo-progress-bar",children:[(0,s.jsxs)("div",{className:"elo-tiers",children:[(0,s.jsx)("span",{className:c?.elo<1100?"active":"",children:"Rookie"}),(0,s.jsx)("span",{className:c?.elo>=1100&&c?.elo<1400?"active":"",children:"Rising Star"}),(0,s.jsx)("span",{className:c?.elo>=1400&&c?.elo<1700?"active":"",children:"Pro"}),(0,s.jsx)("span",{className:c?.elo>=1700&&c?.elo<2e3?"active":"",children:"Expert"}),(0,s.jsx)("span",{className:c?.elo>=2e3?"active":"",children:"Legend"})]}),(0,s.jsxs)("div",{className:"progress-track",children:[(0,s.jsx)("div",{className:"progress-fill",style:{width:`${Math.min((c?.elo||1e3)/2500*100,100)}%`}}),(0,s.jsx)("div",{className:"progress-marker",style:{left:`${Math.min((c?.elo||1e3)/2500*100,100)}%`}})]})]})]}),(0,s.jsxs)("div",{className:"profile-links",children:[(0,s.jsx)(r.default,{href:"/predictions",className:"profile-link predictions-link",children:"ðŸ€ Make Predictions"}),(0,s.jsx)(r.default,{href:"/dashboard",className:"profile-link dashboard-link",children:"ðŸ“Š View Dashboard"})]}),(0,s.jsx)("button",{onClick:w,className:"signout-button",children:"Sign Out"}),(0,s.jsxs)("div",{className:"account-info",children:[(0,s.jsx)("h3",{children:"Account Information"}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{className:"info-label",children:"Email"}),(0,s.jsx)("span",{className:"info-value",children:l.email})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{className:"info-label",children:"Member Since"}),(0,s.jsx)("span",{className:"info-value",children:c?.created_at?new Date(c.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"N/A"})]}),(0,s.jsxs)("div",{className:"info-row",children:[(0,s.jsx)("span",{className:"info-label",children:"User ID"}),(0,s.jsxs)("span",{className:"info-value user-id",children:[l.id.slice(0,8),"..."]})]})]})]})})}e.s(["default",()=>l])}]);